sudo: true
cache:
  directories:
    $HOME/.npm
    $HOME/.cache

env:
  global:
  - secure: "TzQQUk9fwaJ6lCQCaiUXmp8yYDVMvZYnIWC2Jd1uxphH/iUNr7eLCfqjxfMdVfOAcQ3a5WdKi58x4amss2fSA0wX1y7C3477Y4JBlyUpuZ9cdLxAwGlQpG257dHr8UVdjc9W8YvCZWR5rz8fVOOLu2OmjUDqiWA07oVpbTHkWMMcMkEQtxpBKM/mEH0ozMZMEFd6OMcor9d6ZEaL2WYqoFs5gWGGJ1hduQI/a7nGks6/lsLhilG2TjhwD/FphbYRVtycNQLGL/NPlMzVIFZqAG8ipWY6KXOdiyT8yGCwTTAtTRp9YkiTNF5aDD3vEfluTBFuOiHHyIosFp0ihU2P19PfGcPJqQP+p2l4jbiMCuFltgYf9nXLKFfdGaqaOzu2pUuAa9mKtbtTKENc3amNKit8mCPUpnKxfr5ZX5YXC/onyiQZYJrsJFHEaipsfnNghSOnmxluDyXxZDh2QcRmA+/t7GwqNO3dN4g3eHgV5h2SUuc1s5jTLbXy8LwmXh8GG00rwtD03d9CwxKIzn1VOuRL8HfbHyvH9x6uIW7UTlXQWnldRRI5YR53FlkRSdpOYWLcw4J18tU1VjhACJznBOkWRPFYjQVHGeBz1j2Favbaj7k5ZXrfgy7m/gcQmCbfUoNF+RaY7zy3p+jTd9Of3JlPTPyM5I51JLiQZjHJYl8="
  - SELENIUM_HOST=hub.browserstack.com
  - SELENIUM_PORT=80
  - BS_AUTOMATE_PROJECT="$TRAVIS_REPO_SLUG"
  - BS_AUTOMATE_BUILD="Travis build No. $TRAVIS_BUILD_NUMBER for $TRAVIS_REPO_SLUG"
  - secure: "RJ1qfoqhhQ0sYdPH9TmmHU9iImZmm/1CJECwgiBNaKlFWNAyFMnG29cfw/CJU417+pT55JheF9yhllDjHGXch4PhG3onGaSCv9HQYMScUAhiVRF3My1h8pPZ4jsBtg/gJlEIWio/EYki1Eg/9oOff9ac747QnGmN95unRLTp/znZBSBlTxACboGHI4U07XdcB3W25o4FO8hWBLPKR9022DboXJXKfr+y1+S0U9gKAVcR3kZj0kVFinGwnWLbEItCffI8MrFqTw/fuVNmUeFqwxF6PoaDa3ewcqhd5O+El5lSHIHQrNtZJ56dnLVNwsIFarLLF29oTMMTS6HSUtafF3mzibXutAHcV8G/xn6jGl/fr2ZqBTA5T3keCuAEzDjlEZQBx7LAYPB71NLgOew4pYjy+h2w3jIsGBGI4NJL8iuFutt5jKuYV/BnFT1MwPFyqp+IWkt3C4EiwNlgeYOBismL9yWZWtP4rpWhpGSdetFuTsJjtkhvqD3TqcuVPZWsnDMAr4jW5pDdkQRHd8sf/Yx+yQmAatGzg7BRrydPVt+x5KSuDP4Jeqp6318SMp6qHdkfG2whH39LSwuS6jkl5cF613WIQAt6dTVGW5SRgyvkyfxEKvNEJtJnNc8Ef5p5zhKAK1WGwqsX9YYUH6WMEBcHugyY77jlyd4C9J5uCUc="
  - secure: "JeObT0c8QQmVY+kslCGQJUYNNtEro9tRvVof0IOxpc9ZStggDRionkY9v/RLZU9fHyLSySX2hdVfj9htEb7t/LkR5olwB8Ki9BjwYgDlbZsta8nQqlp7dVfD4NV3zOCSgs4IBDLUUCSNQqH9FNpaUetU7Erj5OXSLZp3I6tNMWlnDahy6F7q5vcTJC4ahf+9v/67bvWxNSeKV+PaEZVkn93vnaFW+tvzmzz+hIDcwF05ZwQYuqHNrjXEsEwMDT/1u8MBI8td9oBwjdhO5h7FIgP3ZhW0neraoCDpRagqhGRbLVRczJROC64AdVROgymFeG9zmG4tbFbEhzxO1p1Difbdb+/nkUpT1g1fL65KMnvqgEavJM6HlRJPd069hab6Ulz8LAFAHunMX0o+FTkWEJKTAKdm7iU21ecr+QLzo+2Q5tHLcrXC3iligPj842wbFYFvQ6iK77Z/92f5Wq7fbu4pf9S7GfDVCJVm/VoDFrHNgB25pEi4mHFgYOcdEDEcHeB18012GcviqspYPq7oswfHG5AL0cG+HzBEvXhCk+LzoiHs7Wdai/M+L4XVnp20s0apTMhNNfAR8BudKfXgi1D3/7o62NxIiffPDlFpLHIz9cRJ2r1PamP3oqwBgiYMWfTxCZ5+/y+NTVtpAhMrYsJz829s9NMX4JKnuJq7Q20="
  matrix:
  - SELENIUM_PLATFORM=WINDOWS SELENIUM_BROWSER=IE SELENIUM_VERSION=9


language: node_js
node_js:
  - "4"
  - "5"
  - node

os:
  - linux

before_install:
  - export CHROME_BIN=/usr/bin/google-chrome
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start
  - sleep 3 # give xvfb some time to start
  - sudo apt-get update
  - sudo apt-get install -y libappindicator1 fonts-liberation
  - wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
  - sudo dpkg -i google-chrome*.deb
  - npm config set progress false
  - npm i -g npm@3
  - npm i -g jspm
  - "/sbin/start-stop-daemon --start --quiet --pidfile /tmp/custom_xvfb_99.pid --make-pidfile --background --exec /usr/bin/Xvfb -- :99 -ac -screen 0 1280x1024x16"
  - jspm config registries.github.auth $JSPM_GITHUB_AUTH_TOKEN

install:
  - node --version
  - npm --version
  - git --version
  - jspm --version
  - npm run setup

script:
  - npm run eslint
  - npm run test
  - npm run test-e2e
